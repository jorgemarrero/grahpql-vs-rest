import { Invert } from 'mdx-deck/layouts'
import { CodeSurfer } from "mdx-deck-code-surfer";
import { Appear } from 'mdx-deck';

import Code from '../components/Code';
import Mock from '../components/Mock';


export default Invert

# REST APIS
```notes
- Example GET with response
- Problems: over-fetching, documenting
```
---


```http
GET http://my-awesome-movies.com/api/v1/movies/:movieID
```

---

<CodeSurfer
  code={require("!raw-loader!../snippets/get-rest-example1.snippet")}
	title={() => <Code className="http" titleCodeSurfer>GET http://my-awesome-movies.com/api/v1/movies/:movieID</Code>}
  lang="json"
  showNumbers={false}
  dark
	steps={[
		{ range: [1,7] },
		{ range: [8, 10], notes: "Hypermedia - Machine readable "},
		{ lines: [8]}
	]}
/>

```notes
Hypermedia: Es una manera de referenciar otros recursos existentes en la API
```

---

<CodeSurfer
  code={require("!raw-loader!../snippets/get-rest-example2.snippet")}
	title={() => <Code className="http" titleCodeSurfer>GET http://my-awesome-movies.com/api/v1/movies/:movieID/ratings</Code>}
  lang="json"
  showNumbers={false}
  dark
/>

---

export default Invert

REST has **multiple endpoints** üìö that return **fixed data structures** üîí

---

## #Little example

---

export default Invert

![alt text](./images/mobile-rest.svg "Mobile REST")

```notes
We have 3 differentes request to the server for a tiny UI... doesn't look fine. Let's dive in
```

---

<CodeSurfer
  code={require("!raw-loader!../snippets/get-rest-example3.snippet")}
  lang="js"
  showNumbers={false}
  dark
  steps={[
		{ },
		{ notes: "Too many request!"}, //Under-fetching
		{ lines:[1, 10, 11, 12, 16, 24, 41, 46, 50, 52], notes: "Over-fetching ‚Üí Bandwidth? Memory?"},
	]}
/>

```notes
Under-fetching vs Over-fetching
```

---
export default Invert

# "RESTful APIs are optimized for server,
# not client"

---

# üí°!

---

export default Invert

Why not specify **which parameters** we want to receive in the request?

```http
GET http://my-awesome-movies.com/api/v1/movies/:movieID?ratings=true&cast=true&awards=false
```

<ul className="appear-list">
  <Appear>
    <h2><li>Documentation ‚ö†Ô∏è</li></h2>
    <h2><li>Versioning ‚ö†Ô∏è</li></h2>
    <h2><li>Required fields ü§®</li></h2>
    <h2><li>Debugging ü§®</li></h2>
  </Appear>
</ul>